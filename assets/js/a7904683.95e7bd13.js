"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[48],{4137:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>d});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},m=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=s(a),h=r,d=c["".concat(p,".").concat(h)]||c[h]||u[h]||i;return a?n.createElement(d,o(o({ref:t},m),{},{components:a})):n.createElement(d,o({ref:t},m))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=h;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},551:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var n=a(7462),r=(a(7294),a(4137));const i={id:"learn",sidebar_position:1,title:"Learn"},o="Run our sample playbook",l={unversionedId:"Prepare/learn",id:"Prepare/learn",title:"Learn",description:"Note: Ansible must be installed on the local machine (Installation guide)",source:"@site/docs/2-Prepare/1-Learn.md",sourceDirName:"2-Prepare",slug:"/Prepare/learn",permalink:"/mq-ansible-fork/Prepare/learn",draft:!1,editUrl:"https://github.com/ibm-client-engineering/mq-ansible-fork.git/docs/2-Prepare/1-Learn.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"learn",sidebar_position:1,title:"Learn"},sidebar:"tutorialSidebar",previous:{title:"Prepare",permalink:"/mq-ansible-fork/category/prepare"},next:{title:"Organize",permalink:"/mq-ansible-fork/Prepare/organize"}},p={},s=[{value:"<em>Note</em>: <em>Ansible</em> must be installed on the local machine (Installation guide)",id:"note-ansible-must-be-installed-on-the-local-machine-installation-guide",level:5},{value:"ibmmq.yml",id:"ibmmqyml",level:3}],m={toc:s},c="wrapper";function u(e){let{components:t,...a}=e;return(0,r.kt)(c,(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"run-our-sample-playbook"},"Run our sample playbook"),(0,r.kt)("h5",{id:"note-ansible-must-be-installed-on-the-local-machine-installation-guide"},(0,r.kt)("em",{parentName:"h5"},"Note"),": ",(0,r.kt)("em",{parentName:"h5"},"Ansible")," must be installed on the local machine (",(0,r.kt)("a",{parentName:"h5",href:"https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html"},"Installation guide"),")"),(0,r.kt)("p",null,"Before running the playbook and implementing our modules and roles for IBM MQ:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Check if you have an ",(0,r.kt)("em",{parentName:"p"},"ssh")," key pair in order to access the target machines via SSH. Go to the ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.ssh")," directory in your machine and look for the public and private key files e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"id_rsa")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"id_rsa.pub"),"."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"}," cd ~/.ssh\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"If those two files are not in your ",(0,r.kt)("inlineCode",{parentName:"p"},"ssh")," directory, you need to generate ",(0,r.kt)("inlineCode",{parentName:"p"},"id_rsa")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"id_rsa.pub")," with the following command:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"}," ssh-keygen\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Once the keys have been generated, you need to copy the public key to the target machine's user ",(0,r.kt)("inlineCode",{parentName:"p"},"ssh")," directory."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"}," ssh-copy-id -i id_rsa.pub [USER]@[YOUR_TARGET_HOST]\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"To confirm the keys have been copied successfully, connect to your target machine by:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"}," ssh [USER]@[YOUR_TARGET_HOST]\n")),(0,r.kt)("p",{parentName:"li"},"This should connect to your target machine without asking for a password.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"On your local machine clone this repository. ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Go to the ",(0,r.kt)("inlineCode",{parentName:"p"},"ansible_collections/ibm/ibmmq/")," directory."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"}," cd mq-ansible/ansible_collections/ibm/ibmmq/\n")))),(0,r.kt)("ol",{start:7},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a file ",(0,r.kt)("inlineCode",{parentName:"p"},"inventory.ini")," inside the directory with the following content:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"\n[servers]\nYOUR_HOST_ALIAS ansible_host=YOUR_HOSTNAME ansible_ssh_user=YOUR_SSH_USER\nYOUR_HOST_ALIAS ansible_host=YOUR_HOSTNAME ansible_ssh_user=YOUR_SSH_USER\n\n")),(0,r.kt)("h5",{parentName:"li",id:"note-you-can-specify-one-or-more-hosts"},(0,r.kt)("em",{parentName:"h5"},"Note"),": you can specify one or more hosts"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Change ",(0,r.kt)("inlineCode",{parentName:"li"},"YOUR_HOST_ALIAS")," to an alias name that you wish to use e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"mq-host-1")," , you can omit aliases if you prefer"),(0,r.kt)("li",{parentName:"ul"},"Change ",(0,r.kt)("inlineCode",{parentName:"li"},"YOUR_HOSTNAME")," to your server/hostname, e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"myserver-1.fyre.com")),(0,r.kt)("li",{parentName:"ul"},"Change ",(0,r.kt)("inlineCode",{parentName:"li"},"YOUR_SSH_USER")," to your target machine's SSH user")),(0,r.kt)("h5",{parentName:"li",id:"note-the-user-on-the-target-machine-must-have-root-or-sudo-privileges"},(0,r.kt)("em",{parentName:"h5"},"Note"),": the user on the target machine MUST have ",(0,r.kt)("inlineCode",{parentName:"h5"},"root")," or ",(0,r.kt)("inlineCode",{parentName:"h5"},"sudo")," privileges"))),(0,r.kt)("h3",{id:"ibmmqyml"},"ibmmq.yml"),(0,r.kt)("p",null,"The sample playbook ",(0,r.kt)("a",{parentName:"p",href:"ansible_collections/ibm/ibmmq/ibmmq.yml"},(0,r.kt)("inlineCode",{parentName:"a"},"ibmmq.yml"))," installs IBM MQ Advanced with our roles and configures a queue manager with the ",(0,r.kt)("inlineCode",{parentName:"p"},"queue_manager.py")," module."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Before running the playbook, ensure that you have added the following directory path to the ANSIBLE_LIBRARY environment variable."),(0,r.kt)("h5",{parentName:"li",id:"note-change-path-to-to-your-local-directory-path"},(0,r.kt)("em",{parentName:"h5"},"Note"),": change ",(0,r.kt)("inlineCode",{parentName:"h5"},"<PATH-TO>")," to your local directory path:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"On Mac:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"   export ANSIBLE_LIBRARY=${ANSIBLE_LIBRARY}:<PATH-TO>/mq-ansible/ansible_collections/ibm/ibmmq/library\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"On Windows:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"    set ANSIBLE_LIBRARY=%ANSIBLE_LIBRARY%;<PATH-TO>/mq-ansible/ansible_collections/ibm/ibmmq/library\n"))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Run the following command to execute the tasks within the playbook:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"}," ansible-playbook ./ibmmq.yml -i inventory.ini -e 'ibmMqLicence=accept'\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h5",{parentName:"li",id:"note-you-can-optionally-add--k-uppercase-to-the-command-this-will-prompt-the-user-to-enter-the-sudo-password-for-your_ssh_user-on-the-target-machine-you-can-omit-if-you-have-setup-ssh-keys"},(0,r.kt)("em",{parentName:"h5"},"Note"),": you can optionally add ",(0,r.kt)("inlineCode",{parentName:"h5"},"-K")," (uppercase) to the command, this will prompt the user to enter the sudo password for ","[YOUR_SSH_USER]"," on the target machine, you can omit if you have setup SSH keys")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The playbook should return the result of ",(0,r.kt)("inlineCode",{parentName:"p"},"dspmq")," with the queue manager created listed. Log into your target machine and check it manually:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"}," dspmq\n")))))}u.isMDXComponent=!0}}]);